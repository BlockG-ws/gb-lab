---
import Callout from "./shortcodes/Callout.astro"

import { siteConfig } from "../config";
const daysBeforeOutdated = siteConfig.outdatedCallout.daysBeforeOutdated || 90;

const { lastUpdatedAt = '', noscript = false } = Astro.props
const lastUpdated = new Date(lastUpdatedAt).getTime()
const dateNow = new Date().getTime()
const dateDelta = dateNow - lastUpdated
const Day = 1000 * 60 * 60 * 24
const daysDelta = Math.round(dateDelta / Day)
---
{ ( !noscript && daysDelta >= daysBeforeOutdated ) &&
    <Callout type="warning" icon="ðŸ“…">
        This article was updated {daysDelta} days ago. The content may be outdated.
    </Callout>
}
{ ( noscript && daysDelta >= daysBeforeOutdated ) &&
    <Callout type="warning" icon="ðŸ“…">
        This article was updated a long time ago. The content may be outdated.
    </Callout>
}